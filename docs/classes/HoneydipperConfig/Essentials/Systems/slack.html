<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>slack</title><link rel="stylesheet" type="text/css" href="../../../../styles/main.css" /><script type="text/javascript" src="../../../../styles/main.js"></script><script type="text/javascript">NDLoader.LoadJS("Content", "../../../../styles/");</script></head>

<!-- Generated by Natural Docs, version 2.0.2 -->

<!-- saved from url=(0016)http://localhost -->

<body onload="NDLoader.OnLoad('Content');" class="NDPage NDContentPage">

<a name="Topic30"></a><div class="CTopic TSection LHoneydipperConfig first">
 <div class="CTitle"><span class="Qualifier">Essentials.&#8203;Systems.</span>&#8203;slack</div>
 <div class="CBody"><div class="CHeading">Purpose</div><p>Integrate with slack to post messages to using incoming webhook integration, interact with slack using slash command integration.</p><div class="CHeading">Config</div><table class="CDefinitionList"><tr><td class="CDLEntry">url</td><td class="CDLDefinition"><p>the url given by slack for the incoming webhook integration</p></td></tr><tr><td class="CDLEntry">token</td><td class="CDLDefinition"><p>a token randomly generated for authenticate slash command web request. It should match the url parameter &quot;token&quot;</p></td></tr><tr><td class="CDLEntry">path</td><td class="CDLDefinition"><p>the path part of the uri where the webhook is listening for slash command, defaults to /slack/slashcommand</p></td></tr></table><div class="CHeading">Synopsis</div><p>Below is an example config for the system</p><pre>---<br />systems:<br />  slack:<br />    data:<br />      url: ENC[&lt;decryption_driver&gt;,&lt;base64 encoded ciphertext&gt;]<br />      token: ENC[&lt;decryption_driver&gt;,&lt;base64 encoded ciphertext&gt;]<br />      path: &quot;/command&quot;</pre><p>You can also extend this system.</p><pre>---<br />systems:<br />  dev_channel:<br />    extends:<br />      - slack<br />    data:<br />      url: ENC[&lt;decryption_driver&gt;,&lt;base64 encoded ciphertext&gt;]</pre><div class="CHeading">Notes</div><p>Use encryption for your url and token value for security</p></div>
</div>

<a name="Actions"></a><a name="Topic31"></a><div class="CTopic TGroup LHoneydipperConfig">
 <div class="CTitle">Actions</div>
</div>

<a name="reply"></a><a name="Topic12"></a><div class="CTopic TAction LHoneydipperConfig">
 <div class="CTitle">reply</div>
 <div class="CBody"><p>send reply message to received the slash command. Every slash command web request has an &quot;response_url&quot;, this function will use that &quot;response_url&quot; to post messages.</p><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">content</td><td class="CDLDefinition"><p>the payload of the message, do not set &quot;channel&quot; field.</p></td></tr></table><p>See slack documents for detail on attachments and formatting.</p><div class="CHeading">Example</div><pre>---<br />rules:<br />  - when:<br />      source:<br />        system: slack<br />        trigger: slashcommand<br />    <span class="SHKeyword">do</span>:<br />      target:<br />        system: slack<br />        <span class="SHKeyword">function</span>: reply<br />      parameters:<br />        content:<br />          attachments:<br />            - title: Honeydipper Message<br />              color: good<br />              text: Hello world</pre><div class="CHeading">Notes</div><p>It is recommended to use <a href="../../../../index.html#HoneydipperConfigClass:Essentials.Workflows.notify" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,78);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >notify</a> abstract workflow. It can have multiple recipients and it works for all chat systems that supports &quot;reply&quot; function.</p></div>
</div>

<a name="say"></a><a name="Topic46"></a><div class="CTopic TAction LHoneydipperConfig">
 <div class="CTitle">say</div>
 <div class="CBody"><p>post a message to slack using incoming webhook integration.</p><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">content</td><td class="CDLDefinition"><p>the payload of the message, &quot;channel&quot; field will be recipient.</p></td></tr></table><p>See slack documents for detail on attachments and formatting.</p><div class="CHeading">Example</div><pre>---<br />rules:<br />  - when:<br />      ...<br />    <span class="SHKeyword">do</span>:<br />      target:<br />        system: slack<br />        <span class="SHKeyword">function</span>: say<br />      parameters:<br />        content:<br />          attachments:<br />            - title: Honeydipper Message<br />              color: good<br />              text: Hello world<br />          channel: <span class="SHComment">#public_channel</span></pre><div class="CHeading">Notes</div><p>It is recommended to use <a href="../../../../index.html#HoneydipperConfigClass:Essentials.Workflows.notify" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,78);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >notify</a> abstract workflow. It can have multiple recipients and it works for all chat systems that supports &quot;say&quot; function.</p></div>
</div>

<a name="Triggers"></a><a name="Topic34"></a><div class="CTopic TGroup LHoneydipperConfig">
 <div class="CTitle">Triggers</div>
</div>

<a name="slashcommand"></a><a name="Topic35"></a><div class="CTopic TTrigger LHoneydipperConfig last">
 <div class="CTitle">slashcommand</div>
 <div class="CBody"><p>raised when receive a webhook from slack with a slashcommand, the payload will be in .event.form</p><div class="CHeading">Examples</div><p>Below is an example that respond to a simple slash command</p><pre>---<br />rules:<br />  - when:<br />      source:<br />        system: slack<br />        trigger: slashcommand<br />  - do:<br />      type: if<br />      condition: '{{ eq (index .event.form.text 0) &quot;testcommand&quot; }}'<br />      content:<br />        - type: function<br />          content:<br />            target:<br />              system: slack<br />              function: reply<br />            parameters:<br />              content:<br />                text: '{{ (index .event.form.user_name 0) }}' hello</pre></div>
</div>

</body></html>